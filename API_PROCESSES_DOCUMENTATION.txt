===========================================
ğŸ“‹ API DE PROCESOS - DOCUMENTACIÃ“N FRONTEND
===========================================

ğŸ” BASE URL: http://localhost:3001/api/v1/processes
ğŸ¯ AUTENTICACIÃ“N: Bearer Token en Header Authorization

===========================================
ğŸ¢ ROLES Y PERMISOS
===========================================

ğŸ‘¨â€ğŸ’¼ ADMINISTRADOR:
  âœ… Crear procesos
  âœ… Ver todos los procesos
  âœ… Actualizar cualquier campo
  âœ… Eliminar procesos
  âœ… Ver estadÃ­sticas
  âœ… Asignar revisores

ğŸ‘©â€ğŸ”¬ REVISOR:
  âŒ Crear procesos
  âœ… Ver SOLO procesos asignados a Ã©l
  âœ… Actualizar SOLO el campo "status" de sus procesos
  âŒ Actualizar otros campos
  âŒ Eliminar procesos
  âŒ Ver estadÃ­sticas

ğŸ‘¨â€ğŸ’¼ SUPERVISOR:
  âŒ Crear procesos
  âœ… Ver todos los procesos
  âœ… Actualizar cualquier campo EXCEPTO assignedReviewer
  âŒ Eliminar procesos
  âœ… Ver estadÃ­sticas

===========================================
ğŸ“¡ ENDPOINTS DISPONIBLES
===========================================

1ï¸âƒ£ OBTENER TODOS LOS PROCESOS
  ğŸ“ GET /api/v1/processes
  ğŸ”’ Permisos: Admin (todos) | Supervisor (todos) | Revisor (solo asignados)
  
  ğŸ“¨ Request:
  Headers: {
    "Authorization": "Bearer <token>",
    "Content-Type": "application/json"
  }
  
  ğŸ“¥ Response Success (200):
  [
    {
      "id": "68c7267a9ec44dddb61bf385",
      "name": "Proceso de Contabilidad General",
      "description": "Registro y control de movimientos contables",
      "status": "en revisiÃ³n",
      "dueDate": "2025-10-15T00:00:00.000Z",
      "assignedReviewer": {
        "_id": "68c7267a9ec44dddb61bf382",
        "name": "MarÃ­a Revisora",
        "email": "maria.revisor@empresa.com"
      },
      "createdBy": {
        "_id": "68c7267a9ec44dddb61bf381",
        "name": "Carlos Admin",
        "email": "admin@empresa.com"
      },
      "createdAt": "2025-09-14T20:32:59.001Z",
      "updatedAt": "2025-09-14T20:32:59.001Z"
    }
  ]

-------------------------------------------

2ï¸âƒ£ OBTENER PROCESO POR ID
  ğŸ“ GET /api/v1/processes/:id
  ğŸ”’ Permisos: Admin/Supervisor (cualquier proceso) | Revisor (solo asignados)
  
  ğŸ“¨ Request:
  Headers: {
    "Authorization": "Bearer <token>",
    "Content-Type": "application/json"
  }
  
  ğŸ“¥ Response Success (200):
  {
    "id": "68c7267a9ec44dddb61bf385",
    "name": "Proceso de Contabilidad General",
    "description": "Registro y control de movimientos contables",
    "status": "en revisiÃ³n",
    "dueDate": "2025-10-15T00:00:00.000Z",
    "assignedReviewer": { ... },
    "createdBy": { ... },
    "createdAt": "2025-09-14T20:32:59.001Z",
    "updatedAt": "2025-09-14T20:32:59.001Z"
  }
  
  ğŸ“¥ Response Error (403):
  { "error": "No tienes permisos para ver este proceso" }

-------------------------------------------

3ï¸âƒ£ CREAR PROCESO
  ğŸ“ POST /api/v1/processes
  ğŸ”’ Permisos: SOLO ADMINISTRADOR
  
  ğŸ“¨ Request:
  Headers: {
    "Authorization": "Bearer <token>",
    "Content-Type": "application/json"
  }
  Body: {
    "name": "Nombre del proceso (REQUERIDO)",
    "description": "DescripciÃ³n opcional",
    "dueDate": "2025-12-31", // Fecha lÃ­mite (formato: YYYY-MM-DD)
    "assignedReviewerId": "ID_del_revisor_opcional"
  }
  
  ğŸ“¥ Response Success (201):
  {
    "id": "nuevo_id_generado",
    "name": "Nombre del proceso",
    "description": "DescripciÃ³n opcional",
    "status": "pendiente", // O "en revisiÃ³n" si se asignÃ³ revisor
    "dueDate": "2025-12-31T00:00:00.000Z",
    "assignedReviewer": null, // O datos del revisor si se asignÃ³
    "createdBy": { ... },
    "createdAt": "2025-11-03T17:54:05.462Z"
  }
  
  ğŸ“¥ Response Error (403):
  { "error": "Solo los administradores pueden crear procesos" }

-------------------------------------------

4ï¸âƒ£ ACTUALIZAR PROCESO
  ğŸ“ PUT /api/v1/processes/:id
  ğŸ”’ Permisos: 
    - Admin: Puede actualizar cualquier campo
    - Supervisor: Cualquier campo EXCEPTO assignedReviewer
    - Revisor: SOLO "status" de procesos asignados a Ã©l
  
  ğŸ“¨ Request:
  Headers: {
    "Authorization": "Bearer <token>",
    "Content-Type": "application/json"
  }
  
  // ADMIN puede enviar cualquier campo:
  Body: {
    "name": "Nuevo nombre",
    "description": "Nueva descripciÃ³n",
    "status": "completado", // pendiente | en revisiÃ³n | completado
    "dueDate": "2025-12-31",
    "assignedReviewer": "nuevo_revisor_id"
  }
  
  // SUPERVISOR puede enviar excepto assignedReviewer:
  Body: {
    "name": "Nuevo nombre",
    "description": "Nueva descripciÃ³n", 
    "status": "completado",
    "dueDate": "2025-12-31"
  }
  
  // REVISOR solo puede enviar:
  Body: {
    "status": "completado"
  }
  
  ğŸ“¥ Response Success (200):
  {
    "id": "68c7267a9ec44dddb61bf385",
    // ... proceso actualizado
  }
  
  ğŸ“¥ Response Error (403):
  { "error": "Solo puedes actualizar el campo 'status'. Campos no permitidos: name" }

-------------------------------------------

5ï¸âƒ£ ELIMINAR PROCESO
  ğŸ“ DELETE /api/v1/processes/:id
  ğŸ”’ Permisos: SOLO ADMINISTRADOR
  
  ğŸ“¨ Request:
  Headers: {
    "Authorization": "Bearer <token>"
  }
  
  ğŸ“¥ Response Success (200):
  {
    "message": "Proceso eliminado exitosamente",
    "id": "68c7267a9ec44dddb61bf385"
  }
  
  ğŸ“¥ Response Error (403):
  { "error": "Solo los administradores pueden eliminar procesos" }

-------------------------------------------

6ï¸âƒ£ OBTENER PROCESOS POR ESTADO
  ğŸ“ GET /api/v1/processes/status/:status
  ğŸ”’ Permisos: Admin/Supervisor (todos) | Revisor (solo asignados)
  
  Estados vÃ¡lidos: "pendiente" | "en revisiÃ³n" | "completado"
  
  ğŸ“¨ Request:
  Headers: {
    "Authorization": "Bearer <token>",
    "Content-Type": "application/json"
  }
  
  ğŸ“¥ Response Success (200):
  [
    // Array de procesos con el estado especificado
  ]

-------------------------------------------

7ï¸âƒ£ OBTENER ESTADÃSTICAS
  ğŸ“ GET /api/v1/processes/stats/overview
  ğŸ”’ Permisos: SOLO ADMINISTRADOR Y SUPERVISOR
  
  ğŸ“¨ Request:
  Headers: {
    "Authorization": "Bearer <token>",
    "Content-Type": "application/json"
  }
  
  ğŸ“¥ Response Success (200):
  {
    "total": 8,
    "overdue": 3, // Procesos vencidos
    "byStatus": {
      "pendiente": 2,
      "en revisiÃ³n": 4,
      "completado": 2
    }
  }
  
  ğŸ“¥ Response Error (403):
  { "error": "Solo administradores y supervisores pueden ver estadÃ­sticas" }

===========================================
ğŸ“š ENDPOINTS ADICIONALES (YA EXISTENTES)
===========================================

8ï¸âƒ£ OBTENER PROCESOS DEL REVISOR (ENDPOINT ESPECÃFICO)
  ğŸ“ GET /api/v1/processes/reviewer
  ğŸ”’ Permisos: SOLO REVISOR
  
9ï¸âƒ£ OBTENER PROCESOS PARA SUPERVISIÃ“N
  ğŸ“ GET /api/v1/processes/supervisor
  ğŸ”’ Permisos: SUPERVISOR Y ADMINISTRADOR
  
ğŸ”Ÿ ASIGNAR REVISOR A PROCESO
  ğŸ“ PUT /api/v1/processes/:processId/assign
  ğŸ”’ Permisos: SOLO ADMINISTRADOR
  Body: { "reviewerId": "id_del_revisor" }

1ï¸âƒ£1ï¸âƒ£ OBTENER REVISORES DISPONIBLES
  ğŸ“ GET /api/v1/processes/reviewers
  ğŸ”’ Permisos: SOLO ADMINISTRADOR

===========================================
ğŸ”‘ CREDENCIALES DE PRUEBA
===========================================

ğŸ‘¨â€ğŸ’¼ ADMINISTRADOR:
  Email: admin@empresa.com
  Password: admin123456

ğŸ‘©â€ğŸ”¬ REVISOR:
  Email: maria.revisor@empresa.com
  Password: revisor123

ğŸ‘¨â€ğŸ’¼ SUPERVISOR:
  Email: juan.supervisor@empresa.com
  Password: supervisor123

===========================================
ğŸš¨ CÃ“DIGOS DE ERROR COMUNES
===========================================

400 - Bad Request: Datos invÃ¡lidos o faltantes
401 - Unauthorized: Token invÃ¡lido o faltante
403 - Forbidden: Sin permisos para la operaciÃ³n
404 - Not Found: Proceso no encontrado
500 - Internal Server Error: Error del servidor

===========================================
ğŸ’¡ NOTAS PARA EL FRONTEND
===========================================

1. ğŸ” Siempre incluir el token JWT en el header Authorization
2. ğŸ“‹ Validar permisos en el frontend segÃºn el rol del usuario
3. ğŸ¯ Los revisores solo ven procesos donde assignedReviewer = su_id
4. âš ï¸ Los campos assignedReviewer y createdBy son ObjectIds de MongoDB
5. ğŸ“… Las fechas estÃ¡n en formato ISO (UTC)
6. ğŸ”„ El status siempre debe ser: "pendiente", "en revisiÃ³n" o "completado"
7. ğŸš« Revisor no puede cambiar name, description, dueDate, assignedReviewer

===========================================
ğŸŒ EJEMPLO DE USO EN JAVASCRIPT
===========================================

// Obtener token del login
const token = localStorage.getItem('authToken');

// FunciÃ³n para hacer requests
async function apiRequest(endpoint, method = 'GET', data = null) {
  const config = {
    method,
    headers: {
      'Authorization': `Bearer ${token}`,
      'Content-Type': 'application/json'
    }
  };
  
  if (data) {
    config.body = JSON.stringify(data);
  }
  
  const response = await fetch(`http://localhost:3001/api/v1/processes${endpoint}`, config);
  return await response.json();
}

// Ejemplos de uso:
const allProcesses = await apiRequest('');
const oneProcess = await apiRequest('/68c7267a9ec44dddb61bf385');
const newProcess = await apiRequest('', 'POST', { name: 'Test', description: 'Test desc' });
const updated = await apiRequest('/id', 'PUT', { status: 'completado' });
const stats = await apiRequest('/stats/overview');

===========================================